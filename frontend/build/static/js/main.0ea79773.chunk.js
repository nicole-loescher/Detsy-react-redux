(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{28:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),s=n.n(c),a=n(13),i=n.n(a),o=n(11),u=n(6),l=(n(41),n(5)),j=n(3);n(42);function d(){return Object(r.jsxs)("div",{children:[Object(r.jsxs)("h2",{className:"home__title",children:["Welcome to Detsy",Object(r.jsx)("p",{className:"home__intro",children:"Its not hording if they are dice... "})]}),Object(r.jsx)("h2",{className:"home__noinfo",children:"Oh no... it looks like our dice may have rolled away! Ill go find some more!"})]})}var b=n(9),h=n.n(b),O=n(12),p=n(30),f=n.n(p);function x(e){return m.apply(this,arguments)}function m(){return(m=Object(O.a)(h.a.mark((function e(t){var n,r,c,s,a=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=a.length>1&&void 0!==a[1]?a[1]:{}).method=n.method||"GET",n.headers=n.headers||{},"GET"!==n.method.toUpperCase()&&(n.headers["Content-Type"]=n.headers["Content-Type"]||"application/json",n.headers["XSRF-Token"]=f.a.get("XSRF-TOKEN")),e.next=6,window.fetch(t,n);case 6:if(r=e.sent,!(c=r.headers.get("content-type"))||!c.includes("application/json")){e.next=13;break}return e.next=11,r.json();case 11:s=e.sent,r.data=s;case 13:if(!(r.status>=400)){e.next=15;break}throw r;case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v="session/setUser",g="session/removeUser",_=function(e){return{type:v,payload:e}},w={user:null},y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case v:return(e=Object.assign({},t)).user=n.payload,e;case g:return(e=Object.assign({},t)).user=null,e;default:return t}};var N=function(e){var t=e.user,n=Object(u.b)(),s=Object(c.useState)(!1),a=Object(l.a)(s,2),i=a[0],o=a[1];return Object(c.useEffect)((function(){if(i){var e=function(){console.log("hit"),o(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}}),[i]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:function(){i||o(!0)},children:Object(r.jsx)("i",{className:"fas fa-user-circle"})}),i&&Object(r.jsxs)("ul",{className:"profile-dropdown",children:[Object(r.jsx)("li",{children:t.username}),Object(r.jsx)("li",{children:t.email}),Object(r.jsx)("li",{children:Object(r.jsx)("button",{onClick:function(e){e.preventDefault(),n(function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/api/session",{method:"delete"});case 2:return n=e.sent,t({type:g}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Log Out"})})]})]})},C=(n(44),s.a.createContext());function S(e){var t=e.children,n=Object(c.useRef)(),s=Object(c.useState)(),a=Object(l.a)(s,2),i=a[0],o=a[1];return Object(c.useEffect)((function(){o(n.current)}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(C.Provider,{value:i,children:t}),Object(r.jsx)("div",{ref:n})]})}function k(e){var t=e.onClose,n=e.children,s=Object(c.useContext)(C);return s?i.a.createPortal(Object(r.jsxs)("div",{id:"modal",children:[Object(r.jsx)("div",{id:"modal-background",onClick:t}),Object(r.jsx)("div",{id:"modal-content",children:n})]}),s):null}var E=n(15);var L=function(e){var t=e.setShowModal,n=(e.showModal,Object(u.b)()),s=Object(c.useState)(""),a=Object(l.a)(s,2),i=a[0],j=a[1],d=Object(c.useState)(""),b=Object(l.a)(d,2),p=b[0],f=b[1],m=Object(c.useState)([]),v=Object(l.a)(m,2),g=v[0],w=v[1];return Object(r.jsxs)(E.a,{className:"signup",children:[Object(r.jsx)("h1",{className:"signup__header",children:"Log in, and play!"}),Object(r.jsxs)("form",{className:"signup__form",onSubmit:function(e){return e.preventDefault(),w([]),n((t={credential:i,password:p},function(){var e=Object(O.a)(h.a.mark((function e(n){var r,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.credential,c=t.password,e.next=3,x("/api/session",{method:"POST",body:JSON.stringify({credential:r,password:c})});case 3:return s=e.sent,n(_(s.data.user)),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch((function(e){e.data&&e.data.errors&&w(e.data.errors)}));var t},children:[Object(r.jsx)("ul",{children:g.map((function(e,t){return Object(r.jsx)("li",{className:"signup__error",children:e},t)}))}),Object(r.jsx)("input",{type:"text",value:i,onChange:function(e){return j(e.target.value)},required:!0,placeholder:"Email or Username"}),Object(r.jsx)("input",{type:"password",value:p,onChange:function(e){return f(e.target.value)},required:!0,placeholder:"Password"}),Object(r.jsx)("button",{className:"signup__submit",type:"submit",children:"Log In"}),Object(r.jsx)(o.b,{to:"/",className:"signup__cancel",onClick:function(e){return t(!e)},children:"Cancel"})]})]})};n(28);var P=function(){var e=Object(c.useState)(),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:function(){return s(!0)},children:"Log In"}),n&&Object(r.jsx)(k,{onClick:function(){return s(!1)},children:Object(r.jsx)(L,{showModal:n,setShowModal:s})})]})},T=(n(46),n.p+"static/media/d20-logo.d422f61d.png");function F(e){var t,n=e.isLoaded,c=Object(u.c)((function(e){return e.session.user}));return t=c?Object(r.jsx)(N,{user:c}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(P,{}),Object(r.jsx)(o.c,{className:"nav__signup",to:"/signup",children:"Sign Up"})]}),Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{className:"nav",children:[Object(r.jsx)("li",{children:Object(r.jsx)(o.c,{to:"/",exact:!0,children:Object(r.jsxs)("div",{className:"nav__logo",children:[Object(r.jsx)("img",{className:"nav__logo--photo ",src:T}),Object(r.jsxs)("h2",{className:"nav__logo--title",children:["Detsy",Object(r.jsx)("p",{className:"nav__logo--snip",children:"Where the good times roll."})]})]})})}),Object(r.jsx)("li",{children:Object(r.jsx)("div",{className:"nav__form",children:n&&t})})]})})}var q=n(23);var U=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.session.user})),n=Object(c.useState)(""),s=Object(l.a)(n,2),a=s[0],i=s[1],d=Object(c.useState)(""),b=Object(l.a)(d,2),p=b[0],f=b[1],m=Object(c.useState)(""),v=Object(l.a)(m,2),g=v[0],w=v[1],y=Object(c.useState)(""),N=Object(l.a)(y,2),C=N[0],S=N[1],k=Object(c.useState)([]),L=Object(l.a)(k,2),P=L[0],T=L[1];return Object(j.g)(),t?Object(r.jsx)(j.a,{to:"/"}):Object(r.jsxs)(E.a,{className:"signup",children:[Object(r.jsx)("h1",{className:"signup__header",children:"Create an account today!"}),Object(r.jsxs)("form",{className:"signup__form",onSubmit:function(t){return t.preventDefault(),g===C?(T([]),e((n={email:a,username:p,password:g},function(){var e=Object(O.a)(h.a.mark((function e(t){var r,c,s,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.username,c=n.email,s=n.password,e.next=3,x("/api/users",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,email:c,password:s})});case 3:return a=e.sent,t(_(a.data.user)),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).catch((function(e){e.data&&e.data.errors&&T(e.data.errors)}))):T(["Confirm Password field must be the same as the Password field"]);var n},children:[Object(r.jsx)("ul",{children:P.map((function(e,t){return Object(r.jsx)("li",{className:"signup__error",children:e},t)}))}),Object(r.jsx)("input",{type:"text",value:a,onChange:function(e){return i(e.target.value)},required:!0,placeholder:"Email"}),Object(r.jsx)("input",{type:"text",value:p,onChange:function(e){return f(e.target.value)},required:!0,placeholder:"Username"}),Object(r.jsx)("input",{type:"password",value:g,onChange:function(e){return w(e.target.value)},required:!0,placeholder:"Password"}),Object(r.jsx)("input",{type:"password",value:C,onChange:function(e){return S(e.target.value)},required:!0,placeholder:"Confirm Password"}),Object(r.jsx)(q.a,{className:"signup__submit",type:"submit",children:"Let's roll!"}),Object(r.jsx)(o.b,{to:"/",className:"signup__cancel",children:"Cancel"})]})]})};var D,I=function(){var e=Object(u.b)(),t=Object(c.useState)(!1),n=Object(l.a)(t,2),s=n[0],a=n[1];return Object(c.useEffect)((function(){e(function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/api/session");case 2:return n=e.sent,t(_(n.data.user)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){return a(!0)}))}),[e]),s&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(F,{isLoaded:s}),Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:"/",exact:!0,children:Object(r.jsx)(d,{})}),Object(r.jsx)(j.b,{path:"/signup",children:Object(r.jsx)(U,{})})]})]})},M=n(16),J=n(31),R=Object(M.c)({session:y});D=Object(M.a)(J.a);var G=function(e){return Object(M.d)(R,e,D)}();function W(){return Object(r.jsx)(u.a,{store:G,children:Object(r.jsx)(S,{children:Object(r.jsx)(o.a,{children:Object(r.jsx)(I,{})})})})}i.a.render(Object(r.jsx)(s.a.StrictMode,{children:Object(r.jsx)(W,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.0ea79773.chunk.js.map